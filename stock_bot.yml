name: è‚¡ç¥¨åˆ†ææœºå™¨äºº ğŸ¤–

on:
  workflow_dispatch:
    inputs:
      stocks:
        description: 'è‚¡ç¥¨ä»£ç '
        default: '600460 300474 300623 300420'
        required: false
      force_run:
        description: 'å¼ºåˆ¶è¿è¡Œ'
        default: 'true'
        required: false
  schedule:
    - cron: '*/30 1-7 * * 1-5'

jobs:
  analyze-stocks:
    runs-on: ubuntu-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v3
      - name: è®¾ç½®Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - name: å®‰è£…ä¾èµ–
        run: |
          pip install requests pandas numpy matplotlib reportlab akshare pytz
      - name: è¿è¡Œåˆ†æ
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: python github_stock_bot.py --telegram