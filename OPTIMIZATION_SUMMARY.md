# ç›‘æ§ç³»ç»Ÿä»£ç ä¼˜åŒ–æ€»ç»“

## âœ… ä¼˜åŒ–å®Œæˆ

å·²æˆåŠŸå°†ç‹¬ç«‹ç›‘æ§ç³»ç»Ÿé‡æ„ä¸ºå¤ç”¨ä¸»ç¨‹åºçš„æˆç†Ÿæ¨¡å—ï¼Œå¤§å¹…æé«˜ä»£ç å¤ç”¨ç‡å’Œå¯ç»´æŠ¤æ€§ã€‚

## ğŸ“Š ä¼˜åŒ–æˆæœ

### 1. ä»£ç å¤ç”¨ç‡æå‡
- **åˆ é™¤é‡å¤ä»£ç **: ç§»é™¤äº† `src/data/fetcher.py` (çº¦ 200 è¡Œ)
- **ç»Ÿä¸€æ¨¡å—ä½¿ç”¨**: å¤ç”¨ä¸»ç¨‹åºçš„ `src/data/fetchers/` æ¨¡å—
- **ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ**: ä½¿ç”¨ä¸»ç¨‹åºçš„ `src/utils/logger.py` æ›¿ä»£ `loguru`

### 2. åŠŸèƒ½å¢å¼º
- **å¤šæ•°æ®æºæ”¯æŒ**: ä¸»ç¨‹åºçš„æ•°æ®è·å–æ¨¡å—æœ‰å®Œå–„çš„å¤‡ç”¨æœºåˆ¶
- **ä»£ç æ ‡å‡†åŒ–**: ä½¿ç”¨ `src/utils/code_normalizer.py` ç»Ÿä¸€å¤„ç†è‚¡ç¥¨ä»£ç 
- **æ›´å¥½çš„é”™è¯¯å¤„ç†**: ä¸»ç¨‹åºæ¨¡å—ç»è¿‡å……åˆ†æµ‹è¯•ï¼Œé”™è¯¯å¤„ç†æ›´å®Œå–„
- **æ•°æ®åº“ç¼“å­˜**: ä¸»ç¨‹åºæ”¯æŒæœ¬åœ°æ•°æ®åº“ç¼“å­˜ï¼Œæé«˜æ€§èƒ½

### 3. ç»´æŠ¤æ€§æå‡
- **ç»Ÿä¸€ä»£ç è§„èŒƒ**: ä¸ä¸»ç¨‹åºä¿æŒä¸€è‡´çš„ä»£ç é£æ ¼
- **ç»Ÿä¸€æ—¥å¿—æ ¼å¼**: ä½¿ç”¨ç›¸åŒçš„æ—¥å¿—ç³»ç»Ÿï¼Œä¾¿äºè°ƒè¯•
- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ”„ ä¸»è¦å˜æ›´

### æ–‡ä»¶ä¿®æ”¹

#### `src/monitor/runner.py`
**å˜æ›´å‰**:
```python
from src.data.fetcher import fetch_stock_data, get_stock_name
from src.analysis.indicators import calculate_all_indicators
from loguru import logger

df = fetch_stock_data(code, period="5m", count=100)
stock_name = get_stock_name(code)
df = calculate_all_indicators(df)
```

**å˜æ›´å**:
```python
from src.data.fetchers import fetch_kline_data, get_name
from src.analysis.indicators import calculate_technical_indicators
from src.utils.code_normalizer import normalize_code, is_hk_stock
from src.utils.logger import get_logger

logger = get_logger(__name__)

code = normalize_code(code)  # æ ‡å‡†åŒ–ä»£ç 
df = fetch_kline_data(code, scale=5, datalen=100)
stock_name = get_name(code)
df = calculate_technical_indicators(df)
```

#### `simple_test.py` å’Œ `test_standalone.py`
- æ›´æ–°å¯¼å…¥è·¯å¾„ä½¿ç”¨ä¸»ç¨‹åºæ¨¡å—
- æ›´æ–°å‡½æ•°è°ƒç”¨å‚æ•°ï¼ˆ`period` â†’ `scale`, `count` â†’ `datalen`ï¼‰

#### åˆ é™¤æ–‡ä»¶
- `src/data/fetcher.py` - å·²è¢«ä¸»ç¨‹åºçš„ `src/data/fetchers/` å®Œå…¨è¦†ç›–

## âœ… æµ‹è¯•éªŒè¯

### æµ‹è¯•ç»“æœ
1. **æ•°æ®è·å–** âœ… - æˆåŠŸè·å–è´µå·èŒ…å° 60 æ¡æ—¥çº¿æ•°æ®
2. **æŠ€æœ¯æŒ‡æ ‡è®¡ç®—** âœ… - æ‰€æœ‰æŒ‡æ ‡ï¼ˆMA, RSI, MACD, KDJç­‰ï¼‰è®¡ç®—æ­£å¸¸
3. **ç›‘æ§è§„åˆ™æ£€æŸ¥** âœ… - è§„åˆ™åˆ¤æ–­é€»è¾‘æ­£ç¡®ï¼ŒæˆåŠŸè§¦å‘é¢„è­¦
4. **ç›‘æ§è¿è¡Œå™¨** âœ… - å®Œæ•´æµç¨‹æµ‹è¯•é€šè¿‡ï¼ŒæˆåŠŸè§¦å‘ 2 æ¡é¢„è­¦è§„åˆ™

### æµ‹è¯•è¾“å‡ºç¤ºä¾‹
```
âœ… æˆåŠŸè·å– 60 æ¡æ•°æ®
âœ… æŠ€æœ¯æŒ‡æ ‡è®¡ç®—å®Œæˆ
  - æ”¶ç›˜ä»·: 1337.00
  - MA5: 1355.53
  - RSI: 11.26
  - MACD: -13.82
ğŸ”” è§¦å‘ RSIç›‘æ§æµ‹è¯•: 11.26 < 80.00
```

## ğŸ“ æ¨¡å—ä¾èµ–å…³ç³»

### ä¼˜åŒ–å‰ï¼ˆç‹¬ç«‹æ¨¡å—ï¼‰
```
src/monitor/runner.py
  â”œâ”€â”€ src/data/fetcher.py (ç‹¬ç«‹å®ç°)
  â”œâ”€â”€ src/analysis/indicators.py
  â””â”€â”€ loguru (ç¬¬ä¸‰æ–¹æ—¥å¿—)
```

### ä¼˜åŒ–åï¼ˆå¤ç”¨ä¸»ç¨‹åºï¼‰
```
src/monitor/runner.py
  â”œâ”€â”€ src/data/fetchers/ (ä¸»ç¨‹åºæ¨¡å—)
  â”‚   â”œâ”€â”€ a_share_fetcher.py
  â”‚   â””â”€â”€ hk_stock_fetcher.py
  â”œâ”€â”€ src/analysis/indicators.py (ä¸»ç¨‹åºæ¨¡å—)
  â”œâ”€â”€ src/utils/code_normalizer.py (ä¸»ç¨‹åºå·¥å…·)
  â””â”€â”€ src/utils/logger.py (ä¸»ç¨‹åºæ—¥å¿—)
```

## ğŸ¯ ä¼˜åŒ–æ”¶ç›Š

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| ä»£ç è¡Œæ•° | ~200 è¡Œé‡å¤ | 0 è¡Œé‡å¤ | -100% |
| æ¨¡å—å¤ç”¨ | ç‹¬ç«‹å®ç° | å¤ç”¨ä¸»ç¨‹åº | âœ… |
| æ•°æ®æº | å•ä¸€æ¥å£ | å¤šæ•°æ®æº+å¤‡ç”¨ | âœ… |
| é”™è¯¯å¤„ç† | åŸºç¡€ | å®Œå–„ | âœ… |
| æ—¥å¿—ç³»ç»Ÿ | loguru | ç»Ÿä¸€logger | âœ… |
| ä»£ç ç»´æŠ¤ | éœ€åŒæ­¥ç»´æŠ¤ | ç»Ÿä¸€ç»´æŠ¤ | âœ… |

## ğŸ” å‘åå…¼å®¹æ€§

- âœ… **é…ç½®æ–‡ä»¶æ— éœ€ä¿®æ”¹** - `config/monitor_rules.yaml` æ ¼å¼ä¿æŒä¸å˜
- âœ… **åŠŸèƒ½å®Œå…¨å…¼å®¹** - æ‰€æœ‰ç›‘æ§åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… **æ¥å£ä¿æŒä¸€è‡´** - `MonitorRunner` ç±»çš„ä½¿ç”¨æ–¹å¼ä¸å˜
- âœ… **æµ‹è¯•é€šè¿‡** - æ‰€æœ‰æµ‹è¯•è„šæœ¬æ­£å¸¸è¿è¡Œ

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **Telegram æ¨é€**: æœ¬åœ°æµ‹è¯•ç¯å¢ƒå¯èƒ½æœ‰ç½‘ç»œé™åˆ¶ï¼ŒGitHub Actions ç¯å¢ƒæ­£å¸¸
2. **æ¸¯è‚¡æ•°æ®**: éäº¤æ˜“æ—¶æ®µå¯èƒ½æ— æ³•è·å–å®æ—¶æ•°æ®ï¼Œè¿™æ˜¯æ•°æ®æºé™åˆ¶ï¼Œéä»£ç é—®é¢˜
3. **æ•°æ®åº“ç¼“å­˜**: ä¸»ç¨‹åºæ”¯æŒæœ¬åœ°æ•°æ®åº“ç¼“å­˜ï¼Œé¦–æ¬¡è¿è¡Œä¼šåˆ›å»ºæ•°æ®åº“

## ğŸš€ ä¸‹ä¸€æ­¥

ç³»ç»Ÿå·²å®Œå…¨ä¼˜åŒ–ï¼Œå¯ä»¥ï¼š
1. æ¨é€åˆ° GitHub
2. é…ç½® GitHub Secrets
3. å¼€å¯è‡ªåŠ¨ç›‘æ§

æ‰€æœ‰åŠŸèƒ½å·²éªŒè¯é€šè¿‡ï¼
